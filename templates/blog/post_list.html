{% extends 'blog/base.html' %}
{% block title %}Posts{% endblock %}
{% block content %}
<h2 class="text-2xl font-bold mb-4">All Posts</h2>
<form method="get" class="flex gap-2 mb-6">
    <input type="text" name="search" value="{{ search_query }}" placeholder="Search..."
        class="input input-bordered w-full max-w-xs" />
    <button class="btn btn-primary">Search</button>
</form>
<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for post in page_object %}
        <div class="card bg-base-100 shadow">
            <div class="card-body">
                <h3 class="card-title">{{ post.title }}</h3>
                <p class="line-clamp-3">{{ post.content|truncatewords:20 }}</p>
                <div class="card-actions justify-between mt-4">
                    <a href="{% url 'post_details' post.id %}" class="btn btn-sm btn-outline">Read More</a>
                    <span class="badge badge-ghost">{{ post.category.name }}</span>
                </div>
            </div>
        </div>
    {% empty %}
        <p>No posts found.</p>
    {% endfor %}
</div>
<div class="flex justify-center mt-6">
    <div class="join">
        {% if page_object.has_previous %}
            <a class="join-item btn" href="?page={{ page_object.previous_page_number }}">«</a>
        {% endif %}
        <button class="join-item btn btn-active">{{ page_object.number }}</button>
        {% if page_object.has_next %}
            <a class="join-item btn" href="?page={{ page_object.next_page_number }}">»</a>
        {% endif %}
    </div>
</div>
{% endblock %}