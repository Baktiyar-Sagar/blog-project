{% extends 'blog/base.html' %}
{% block title %}Profile{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto space-y-6">

    <!-- Profile Header -->
    <h2 class="text-3xl font-bold mb-6 text-center">{{ user.username }}'s Profile</h2>

    <!-- Tabs -->
    <div class="tabs tabs-boxed justify-center mb-6">
        <a href="?section=profile" class="tab {% if section == 'profile' %}tab-active{% endif %}">Profile</a>
        <a href="?section=posts" class="tab {% if section == 'posts' %}tab-active{% endif %}">My Posts</a>
        <a href="?section=update" class="tab {% if section == 'update' %}tab-active{% endif %}">Update Profile</a>
    </div>

    <!-- Profile Section -->
    {% if section == 'profile' %}
        <div class="card bg-base-100 shadow-xl p-6 rounded-lg">
            <p><strong>Username:</strong> {{ user.username }}</p>
            <p><strong>Email:</strong> {{ user.email }}</p>
        </div>

    <!-- Posts Section -->
    {% elif section == 'posts' %}
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-semibold">My Posts</h3>
            <a href="{% url 'post_create' %}" class="btn btn-primary btn-sm hover:scale-105 transition-transform">+ New Post</a>
        </div>

        <div class="space-y-4">
            {% for post in posts %}
                <div class="card bg-base-100 shadow-lg p-4 flex justify-between items-center rounded-lg">
                    <div>
                        <a href="{% url 'post_details' post.id %}" class="text-lg font-semibold hover:underline">
                            {{ post.title }}
                        </a>
                        <p class="text-sm text-gray-500">Category: {{ post.category.name }}</p>
                    </div>
                    <div class="flex gap-2">
                        <a href="{% url 'post_update' post.id %}" class="btn btn-sm btn-outline hover:bg-indigo-50">Update</a>
                        <a href="{% url 'post_delete' post.id %}" class="btn btn-sm btn-error hover:bg-red-50"
                           onclick="return confirm('Are you sure you want to delete this post?');">
                           Delete
                        </a>
                    </div>
                </div>
            {% empty %}
                <p class="text-gray-600 text-center">You haven't created any posts yet.</p>
            {% endfor %}
        </div>

    <!-- Update Profile Section -->
    {% elif section == 'update' %}
        {% include "user/update_profile_form.html" %}
    {% endif %}
</div>
{% endblock %}
